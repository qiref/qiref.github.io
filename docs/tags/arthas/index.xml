<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Arthas on 大道至简</title>
    <link>https://qiref.github.io/tags/arthas/</link>
    <description>Recent content in Arthas on 大道至简</description>
    <generator>Hugo</generator>
    <language>cn-zh</language>
    <lastBuildDate>Wed, 22 Mar 2023 21:29:21 +0800</lastBuildDate>
    <atom:link href="https://qiref.github.io/tags/arthas/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Arthas火焰图使用</title>
      <link>https://qiref.github.io/post/2023/03/22/arthas%E7%81%AB%E7%84%B0%E5%9B%BE%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Wed, 22 Mar 2023 21:29:21 +0800</pubDate>
      <guid>https://qiref.github.io/post/2023/03/22/arthas%E7%81%AB%E7%84%B0%E5%9B%BE%E4%BD%BF%E7%94%A8/</guid>
      <description>&lt;h2 id=&#34;arthas-火焰图相关命令&#34;&gt;arthas 火焰图相关命令&lt;/h2&gt;&#xA;&lt;p&gt;&lt;code&gt;arthas&lt;/code&gt; 中 &lt;code&gt;profiler&lt;/code&gt; 命令支持生成应用热点的火焰图。本质上是通过不断的采样，然后把收集到的采样结果生成火焰图。&lt;/p&gt;&#xA;&lt;p&gt;启动arthas：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;java -jar arthas-boot.jar&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;开始收集火焰图：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[arthas@1]$ profiler start&#xA;Profiling started&#xA;[arthas@1]$ profiler status&#xA;Profiling is running for 6 seconds&#xA;[arthas@1]$ profiler status&#xA;Profiling is running for 27 seconds&#xA;[arthas@1]$ profiler getSamples &#xA;2&#xA;[arthas@1]$ profiler getSamples &#xA;4&#xA;[arthas@1]$ profiler stop --file /tmp/cpu-result-1.html&#xA;OK&#xA;profiler output file: /tmp/cpu-result-1.html&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;命令说明：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;profiler start&lt;/code&gt; 开启火焰图收集；&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;profiler status&lt;/code&gt; 查看火焰图收集的状态，会显示当前已经采集多长时间；&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;profiler getSamples&lt;/code&gt; 获取已采集的 sample 的数量，理论上，sample 越多，结果越准确；&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;profiler stop  --file /tmp/cpu-result-1.html&lt;/code&gt; 停止当前火焰图收集，会输出到文件中去，生成的文件就是火焰图；&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;关键参数说明&#34;&gt;关键参数说明&lt;/h3&gt;&#xA;&lt;h4 id=&#34;event&#34;&gt;event&lt;/h4&gt;&#xA;&lt;p&gt;-e, &amp;ndash;event &lt;value&gt; 默认采集 CPU 信息，可设：cpu, alloc, lock, cache-misses etc&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
